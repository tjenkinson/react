/** @license React vundefined
 * react-interactions-events/focus.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(h,f){"object"===typeof exports&&"undefined"!==typeof module?module.exports=f(require("react")):"function"===typeof define&&define.amd?define(["react"],f):h.ReactEventsFocus=f(h.React)})(this,function(h){function f(a){return"function"===typeof a}function l(a,d,c,b,e){return{isTargetAttached:e,target:c,type:d,pointerType:b,timeStamp:a.getTimeStamp(),continuePropagation:function(){a.continuePropagation()}}}function n(a,d,c,b){a=a.type;k=!1;c=c.focusTarget;null===c||!d.isTargetWithinResponderScope(c)||
"mousedown"!==a&&"touchstart"!==a&&"pointerdown"!==a||b(!1)}function r(a,d,c,b){switch(a.type){case "pointermove":case "pointerdown":case "pointerup":c.pointerType=a.nativeEvent.pointerType;n(a,d,c,b);break;case "keydown":case "keyup":var e=c.focusTarget;a=a.nativeEvent;var g=a.altKey,f=a.ctrlKey;a.metaKey||!y&&g||f||(c.pointerType="keyboard",k=!0,null!==e&&d.isTargetWithinResponderScope(e)&&b(!0));break;case "touchmove":case "touchstart":case "touchend":c.pointerType="touch";c.isEmulatingMouseEvents=
!0;n(a,d,c,b);break;case "mousedown":c.isEmulatingMouseEvents?c.isEmulatingMouseEvents=!1:(c.pointerType="mouse",n(a,d,c,b))}}function p(a,d,c){var b=c.pointerType,e=c.focusTarget,g=d.onBlur;f(g)&&(b=l(a,"blur",e,b,!0),a.dispatchEvent(b,g,0));g=d.onFocusChange;f(g)&&a.dispatchEvent(!1,g,0);c.isFocusVisible&&q(a,d,!1)}function t(a,d,c,b){var e=b.pointerType;d=b.focusTarget||d.target;c=c.onBlurWithin;b=null===b.detachedTarget;f(c)&&(e=l(a,"blurwithin",d,e,b),a.dispatchEvent(e,c,0))}function q(a,d,c){d=
d.onFocusVisibleChange;f(d)&&a.dispatchEvent(c,d,0)}function m(a,d,c,b){var e=d.onFocusWithinChange;f(e)&&a.dispatchEvent(b,e,0);c.isFocusVisible&&(d=d.onFocusWithinVisibleChange,f(d)&&a.dispatchEvent(b,d,0))}var k=!0,y="undefined"!==typeof window&&null!=window.navigator?/^Mac/.test(window.navigator.platform):!1,u=["focus","blur","beforeblur"],v="undefined"!==typeof window&&null!=window.PointerEvent?"keydown keyup pointermove pointerdown pointerup blur".split(" "):"keydown keyup mousedown touchmove touchstart touchend blur".split(" "),
w=h.unstable_createResponder("Focus",{targetEventTypes:u,targetPortalPropagation:!0,rootEventTypes:v,getInitialState:function(){return{detachedTarget:null,focusTarget:null,isEmulatingMouseEvents:!1,isFocused:!1,isFocusVisible:!1,pointerType:""}},onEvent:function(a,d,c,b){var e=a.type,g=a.target;if(c.disabled)b.isFocused&&(p(d,c,b),b.isFocused=!1,b.focusTarget=null);else switch(e){case "focus":b.focusTarget=d.getResponderNode();b.isFocused||b.focusTarget!==g||(b.isFocused=!0,b.isFocusVisible=k,e=b.pointerType,
g=b.focusTarget,a=c.onFocus,f(a)&&(e=l(d,"focus",g,e,!0),d.dispatchEvent(e,a,0)),a=c.onFocusChange,f(a)&&d.dispatchEvent(!0,a,0),b.isFocusVisible&&q(d,c,!0));b.isEmulatingMouseEvents=!1;break;case "blur":b.isFocused&&(p(d,c,b),b.isFocusVisible=k,b.isFocused=!1),null==a.nativeEvent.relatedTarget&&(b.pointerType=""),b.isEmulatingMouseEvents=!1}},onRootEvent:function(a,d,c,b){r(a,d,b,function(a){b.isFocused&&b.isFocusVisible!==a&&(b.isFocusVisible=a,q(d,c,a))})},onUnmount:function(a,d,c){c.isFocused&&
p(a,d,c)}}),x=h.unstable_createResponder("FocusWithin",{targetEventTypes:u,targetPortalPropagation:!0,rootEventTypes:v,getInitialState:function(){return{detachedTarget:null,focusTarget:null,isEmulatingMouseEvents:!1,isFocused:!1,isFocusVisible:!1,pointerType:""}},onEvent:function(a,d,c,b){var e=a.type,g=a.nativeEvent.relatedTarget;if(c.disabled)b.isFocused&&(m(d,c,b,!1),b.isFocused=!1,b.focusTarget=null);else switch(e){case "focus":b.focusTarget=d.getResponderNode();b.isFocused||(b.isFocused=!0,b.isFocusVisible=
k,m(d,c,b,!0));!b.isFocusVisible&&k&&(b.isFocusVisible=k,e=c.onFocusWithinVisibleChange,f(e)&&d.dispatchEvent(!0,e,0));e=b.pointerType;a=b.focusTarget||a.target;b=c.onFocusWithin;f(b)&&(a=l(d,"focuswithin",a,e,!0),d.dispatchEvent(a,b,0));break;case "blur":b.isFocused&&!d.isTargetWithinResponder(g)&&(m(d,c,b,!1),t(d,a,c,b),b.isFocused=!1);break;case "beforeblur":c=c.onBeforeBlurWithin,f(c)?(e=l(d,"beforeblurwithin",a.target,b.pointerType,!0),b.detachedTarget=a.target,d.dispatchEvent(e,c,0)):d.continuePropagation()}},
onRootEvent:function(a,d,c,b){if("blur"===a.type){var e=b.detachedTarget;null!==e&&e===a.target&&(t(d,a,c,b),b.detachedTarget=null)}else r(a,d,b,function(a){if(b.isFocused&&b.isFocusVisible!==a){b.isFocusVisible=a;var e=c.onFocusWithinVisibleChange;f(e)&&d.dispatchEvent(a,e,0)}})},onUnmount:function(a,d,c){c.isFocused&&m(a,d,c,!1)}});return{FocusResponder:w,useFocus:function(a){return h.unstable_useResponder(w,a)},FocusWithinResponder:x,useFocusWithin:function(a){return h.unstable_useResponder(x,
a)}}});
